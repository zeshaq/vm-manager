{% extends 'base.html' %}

{% block content %}
<div style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">

    <!-- Page Header -->
    <div style="border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
        <h1>Load Balancer Setup</h1>
        <p style="color: #666; margin: 0;">Verify that the host environment is correctly configured for HAProxy.</p>
    </div>

    {% if all_passed %}
        <div style="padding: 15px; margin-bottom: 20px; border-radius: 4px; color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb;">
            <strong>All checks passed!</strong> The load balancer is configured correctly.
        </div>
    {% else %}
        <div style="padding: 15px; margin-bottom: 20px; border-radius: 4px; color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb;">
            <strong>Setup Required.</strong> Please follow the instructions below to complete the setup.
        </div>
    {% endif %}

    <!-- Checks Table -->
    <table style="width: 100%; border-collapse: collapse;">
        <thead style="background: #f8f9fa;">
            <tr>
                <th style="padding: 12px; border-bottom: 2px solid #ddd; text-align: left; width: 50px;">Status</th>
                <th style="padding: 12px; border-bottom: 2px solid #ddd; text-align: left;">Check</th>
                <th style="padding: 12px; border-bottom: 2px solid #ddd; text-align: left;">Details</th>
            </tr>
        </thead>
        <tbody>
            {% for name, check in checks.items() %}
            <tr style="border-bottom: 1px solid #eee;">
                <td style="padding: 15px; text-align: center;">
                    {% if check.pass %}
                        <span style="font-size: 1.5em; color: #28a745;">✓</span>
                    {% else %}
                        <span style="font-size: 1.5em; color: #dc3545;">✗</span>
                    {% endif %}
                </td>
                <td style="padding: 15px;">
                    <strong>{{ check.message }}</strong>
                </td>
                <td style="padding: 15px;">
                    {% if not check.pass %}
                        <p style="margin: 0 0 10px 0;">{{ check.fix_description }}</p>
                        <code style="display: block; background: #e9ecef; padding: 10px; border-radius: 4px; white-space: pre-wrap; word-wrap: break-word;">{{ check.fix_command }}</code>
                    {% else %}
                        <span style="color: #6c757d;">OK</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div style="margin-top: 30px; text-align: center;">
        <a href="{{ url_for('setup.setup_page') }}"><button>Re-run Checks</button></a>
        <a href="{{ url_for('loadbalancer.manage_loadbalancer') }}"><button style="background: #007bff;">Back to Load Balancer</button></a>
    </div>

</div>
{% endblock %}