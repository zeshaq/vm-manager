{% extends 'base.html' %}

{% block content %}
<div class="card">
    <div class="card-body">

        <!-- Page Header -->
        <div class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-4">
            <div>
                <h1>HAProxy Statistics</h1>
                <p class="text-muted">Live statistics for the integrated load balancer.</p>
            </div>
            <a href="{{ url_for('loadbalancer.manage_loadbalancer') }}" class="btn btn-primary">‚Üê Back to Routes</a>
        </div>
    
        {% if error %}
            <div class="alert alert-danger" role="alert">
                <strong>Error:</strong> {{ error }}
            </div>
        {% else %}
            <!-- HAProxy content will be injected here -->
            <div class="haproxy-stats-container table-responsive">
                {{ stats_content|safe }}
            </div>
        {% endif %}
        
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const container = document.querySelector('.haproxy-stats-container');
    if (container) {
        const tables = container.querySelectorAll('table');
        tables.forEach(table => {
            table.classList.add('table', 'table-bordered', 'table-striped', 'table-sm');
        });
        const headers = container.querySelectorAll('h1');
        headers.forEach(header => {
            header.classList.add('h4');
        });
    }
});
</script>
{% endblock %}